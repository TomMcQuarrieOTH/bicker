(function(){angular.module("bicker_router",["ngAnimate"]).run(function(a,b,c,d,e,f){var g;return g=void 0,d.$on("$locationChangeStart",function(){return b.isReady()?b.setReady(!1):void 0}),d.$on("$locationChangeSuccess",function(h,i){var j,k,l,m,n,o,p;if(i!==g){g=i,f.reset(),n=b.match(c.path()),j=n?b.extractData(n):{},l=e.notIn(a.list,j),l=_.difference(l,b.getPersistentStates()),k={unsetting:l,setting:j},d.$emit("bicker_router.beforeStateChange",k),0!==k.unsetting.length&&a.unset(k.unsetting),o=k.setting;for(m in o)p=o[m],a.set(m,p);b.setReady(!0)}})})}).call(this),function(){var a=[].slice;angular.module("bicker_router").constant("ObjectHelper",{get:function(a,b){var c,d,e,f,g,h;if(""===b)return a;for(g=b.split("."),d=g.pop(),f=a,c=0,e=g.length;e>c;c++)if(h=g[c],f=f[h],void 0===f)return;return f[d]},set:function(a,b,c){var d,e,f,g,h,i;for(h=b.split("."),e=h.pop(),g=a,d=0,f=h.length;f>d;d++)i=h[d],void 0===g[i]&&(g[i]={}),g=g[i];return g[e]=c},unset:function(a,b){var c,d,e,f,g,h;if(""===b)return a;for(g=b.split("."),d=g.pop(),f=a,c=0,e=g.length;e>c;c++)if(h=g[c],f=f[h],void 0===f)return!1;return void 0===f[d]?!1:(delete f[d],!0)},notIn:function(a,b,c){var d,e,f,g,h,i;for(null==c&&(c=""),g=[],c=c.length>0?c+".":"",h=Object.keys(a),d=0,f=h.length;f>d;d++)e=h[d],i=""+c+e,void 0===b[e]?g.push(i):"object"!=typeof a[e]||a[e]instanceof Array||(g=g.concat(this.notIn(a[e],b[e],i)));return g},"default":function(){var b,c,d,e,f,g;e=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],f={},b=1===c.length?c[0]:this["default"].apply(this,c);for(d in b)g=b[d],g instanceof Array?f[d]=e[d]||g:"object"==typeof g&&"object"==typeof e[d]?f[d]=this["default"](e[d],g):f[d]=e[d]||g;for(d in e)g=e[d],f[d]=f[d]||g;return f}})}.call(this),function(){angular.module("bicker_router").directive("routeHref",function(a,b,c){return{restrict:"A",scope:!0,link:function(d,e,f){var g,h,i;void 0===f.ignoreHref&&e.click(function(a){return a.preventDefault(),c(function(){return b.url(e.attr("href"))})}),g=a.getUrlWriters();for(i in g)h=g[i],d[i+"UrlWriter"]=h;return d.$watch(f.routeHref,function(a){return e.attr("href",a)})}}})}.call(this),function(){angular.module("bicker_router").directive("view",function(a,b,c,d,e,f,g,h,i,j,k,l){var m;return m={restrict:"E",scope:!1,replace:!0,template:"<div></div>",link:function(m,n,o){var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;return H=!1,J=void 0,I=!1,G=c.getView(o.name),p=G.getBindings(),n.addClass("ng-hide"),B=void 0,A=void 0,v=function(a){return _.cloneDeep(e.getSubset(w(a)))},y=function(a){var b,c,d,f,g,h;if(null==a.requiredState)return!0;for(g=a.requiredState,c=0,d=g.length;d>c;c++){if(h=g[c],f=!1,"!"===h.charAt(0)&&(h=h.slice(1),f=!0),b=e.get(h),null==b)return!1;if(f&&(b=!b),!b)return!1}return!0},z=function(a,b){var c,d;return(c=u(b))?(d=v(c),c===A&&angular.equals(B,d)?void 0:(A=c,B=d,j.increase(),E(a,c).then(function(b){var d;return d=b?300:void 0,H?(J.$destroy(),q(a,c,d)):g.removeClass(a,"ng-hide").then(function(b){return function(){return q(a,c,d)}}(this))}))):void(H&&(g.addClass(a,"ng-hide").then(function(b){return function(){return r(a)}}(this)),B=void 0,A=void 0))},u=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],y(b))return b},r=function(a){return H!==!1?(H=!1,a.html(""),J.$destroy()):void 0},q=function(c,e,f){var g,i,l,n;return n=Date.now(),i=function(d){var g,i,k;return H=!0,k=Date.now()-n,g=function(){var f,g,i,k,l;return g=d.dependencies,l=d.template,c.html(l),i=a(c.contents()),J=m.$new(),e.controller&&(k=_.merge(g,{$scope:J}),f=b(e.controller,k),c.data("$ngControllerController",f),c.children().data("$ngControllerController",f)),i(J),h(function(){return e.manualCompletion?void 0:j.decrease()})},i=Math.max(0,f-k),f>k?h(function(){return g()},i):g()},g=function(){return h(function(){return e.manualCompletion?void 0:j.decrease()}),D(c,e)},l={template:k(e.templateUrl),dependencies:C(e)},d.all(l).then(i,g)},E=function(b,c){var e;return c.resolvingTemplateUrl&&c.resolve&&0!==Object.keys(c.resolve).length?k(c.resolvingTemplateUrl).then(function(c){return b.html(c),a(b.contents())(f.$new())}):(e=d.defer(),e.resolve(!1),e.promise)},D=function(a,b){return b.resolvingErrorTemplateUrl?k(b.resolvingErrorTemplateUrl).then(function(b){return a.html(b)}):void 0},C=function(a){var b,c,e,f,g;if(!a.resolve||0===Object.keys(a.resolve).length)return b=d.defer(),b.resolve({}),b.promise;f={},g=a.resolve;for(e in g)c=g[e],f[e]=i.invoke(c);return d.all(f)},w=function(a){return _.union(a.requiredState||[],a.watchedState||[])},F=function(a){return"!"===a.charAt(0)?a.substr(1):a},x=function(a){return _.flatten(_.map(a.getBindings(),w))},t=function(a){return _.uniq(_.map(x(a),F))},s=t(G),l.whenReady().then(function(){var a;return I=!0,z(n,p),I=!1,0!==s.length?(a=function(){return I?void 0:(I=!0,h(function(){return z(n,p),I=!1}))},e.watch(s,a),m.$on("$destroy",function(){return e.removeWatcher(a)})):void 0})}}})}.call(this),function(){angular.module("bicker_router").factory("PendingViewCounter",function(a){var b;return new(b=function(){function b(){}return b.prototype.count=0,b.prototype.initialViewsLoaded=!1,b.prototype.get=function(){return this.count},b.prototype.increase=function(){return this.count+=1},b.prototype.decrease=function(){return this.count=Math.max(0,this.count-1),0===this.count?this.initialViewsLoaded?a.$broadcast("bicker_router.currentViewsLoaded"):(a.$broadcast("bicker_router.initialViewsLoaded"),this.initialViewsLoaded=!0):void 0},b.prototype.reset=function(){return this.count=0,this.initialViewsLoaded=!1},b}())})}.call(this),function(){angular.module("bicker_router").factory("$templateRequest",function(a,b,c){return function(d){var e,f;return f=a.get(d),null!=f?(e=c.defer(),e.resolve(f),e.promise):b.get(d).then(function(b){return a.put(d,b.data),b.data})}})}.call(this),function(){angular.module("bicker_router").factory("WatchableListFactory",function(a,b){var c,d;return c=function(){function c(a){this.list=a,this.watchers=[]}return c.prototype.get=function(b){return a.get(this.list,b)},c.prototype.getAll=function(){return this.list},c.prototype.getSubset=function(a){return _.zipObject(a,_.map(a,this.get.bind(this)))},c.prototype.set=function(b,c){return a.set(this.list,b,c),this._notifyWatchers(b,c)},c.prototype.unset=function(b){var c,d,e,f;for(b instanceof Array||(b=[b]),f=[],c=0,d=b.length;d>c;c++)e=b[c],a.unset(this.list,e),f.push(this._notifyWatchers(e,void 0));return f},c.prototype.watch=function(a,c){var d,e,f,g;for(a instanceof Array||(a=[a]),g=[],d=0,e=a.length;e>d;d++)f=a[d],g.push(this.watchers.push(b.create(f,c,this.get(f))));return g},c.prototype.removeWatcher=function(a){var b,c,d,e;if(0!==this.watchers.length){for(d=[],c=b=0,e=this.watchers.length-1;e>=0?e>=b:b>=e;c=e>=0?++b:--b)this.watchers[c].handler!==a&&d.push(this.watchers[c]);return this.watchers=d}},c.prototype._notifyWatchers=function(b){var c,d,e,f,g,h;for(e=this.watchers,f=[],c=0,d=e.length;d>c;c++)h=e[c],g=a.get(this.list,h.watchPath),h.shouldNotify(b,g)?f.push(h.notify(b,g)):f.push(void 0);return f},c}(),d={create:function(a){return null==a&&(a={}),new c(a)}}})}.call(this),function(){angular.module("bicker_router").factory("WatcherFactory",function(){var a,b;return a=function(){function a(a,b,c){this.watchPath=a,this.handler=b,null==c&&(c=void 0),this.currentValue=_.cloneDeep(c)}return a.prototype.shouldNotify=function(a,b){return!angular.equals(this.currentValue,b)},a.prototype.notify=function(a,b){return this.handler(a,b,this.currentValue),this.currentValue=_.cloneDeep(b)},a}(),b={create:function(b,c,d){return null==d&&(d=void 0),new a(b,c,d)}}})}.call(this),function(){var a=[].slice,b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("bicker_router").provider("Route",function(c){var d,e,f,g,h,i,j;return g={},i={},j=[],d=[],f=!1,h={},e={registerType:function(a,b){return h[a]=b,h[a].regex=new RegExp(h[a].regex.source,"i"),_.extend({and:this.registerType},this)},registerUrlToken:function(a,b){return g[a]=_.extend({name:a},b),_.extend({and:this.registerUrlToken},this)},registerUrlWriter:function(a,b){return i[a]=b,_.extend({and:this.registerUrlWriter},this)},registerUrl:function(a,b){var c;return null==b&&(b={}),c={compiledUrl:this._compileUrlPattern(a,b),pattern:a},j.unshift(_.extend(c,b)),_.extend({and:this.registerUrl},this)},_compileUrlPattern:function(a,b){var c,d,e,f,i,j;for(a=this._escapeRegexSpecialCharacters(a),a=this._ensureOptionalTrailingSlash(a),i=/\{([A-Za-z\._0-9]+)\}/g,j=a,b.partialMatch||(j="^"+j+"$"),f=[];null!==(d=i.exec(a));)e=g[d[1]],f.push(e),j=j.replace(d[0],"("+h[e.type].regex.source+")");return j.replace(".","\\."),c={regex:new RegExp(j,"i"),tokens:f}},_ensureOptionalTrailingSlash:function(a){return a.match(/\/$/)?a.replace(/\/$/,"/?"):a+"/?"},_escapeRegexSpecialCharacters:function(a){return a.replace(/[\-\[\]\/\(\)\*\+\?\\\^\$\|]/g,"\\$&")},setPersistentStates:function(){var c,e,f,g,h;for(h=1<=arguments.length?a.call(arguments,0):[],f=[],c=0,e=h.length;e>c;c++)g=h[c],b.call(d,g)<0?f.push(d.push(g)):f.push(void 0);return f},$get:function(a,b,e,f){var k;return _.forIn(i,function(a,b){return i[b]=function(b){var c;return null==b&&(b={}),c={UrlData:b},e.invoke(a,{},c)}}),k={readyDeferred:f.defer(),match:function(a){var b,c,d,e;for(b=0,c=j.length;c>b;b++)if(e=j[b],null!==(d=e.compiledUrl.regex.exec(a)))return{url:e,regexMatch:d};return null},extractData:function(a,b){var d,e;return null==b&&(b=void 0),d=this.extractDefaultData(a),e=this.extractPathData(a),b=this.extractSearchData(b),c["default"](b,e,d)},extractSearchData:function(b){var d,f,i,j,k,l,m,n,o,p,q,r;null==b&&(b=a.search()),d=_.clone(b),j={};for(i in d)r=d[i],q=_.findKey(g,{searchAlias:i}),null==q&&(q=i),(!g[q]||(null!=(k=h[null!=(l=g[q])?l.type:void 0])?k.regex.test(r):void 0))&&((null!=(m=h[null!=(n=g[q])?n.type:void 0])?m.parser:void 0)&&(r=e.invoke(null!=(o=h[g[q].type])?o.parser:void 0,null,{token:r})),f=(null!=(p=g[q])?p.statePath:void 0)||q,c.set(j,f,r));return j},extractDefaultData:function(a){var b,d,e,f;b={},e=a.url.state;for(d in e)f=e[d],c.set(b,d,f);return b},extractPathData:function(a){var b,d,f,g,i,j,k;if(b={},g=a.url.compiledUrl.tokens,0===g.length)return{};for(f=d=0,i=g.length-1;i>=0?i>=d:d>=i;f=i>=0?++d:--d)j=a.url.compiledUrl.tokens[f],k=a.regexMatch[f+1],h[j.type].parser&&(k=e.invoke(h[j.type].parser,null,{token:k})),c.set(b,j.statePath||j.name,k);return b},getUrlWriters:function(){return i},getUrlWriter:function(a){return i[a]},invokeUrlWriter:function(a,b){return null==b&&(b={}),i[a](b)},go:function(b,c){return null==c&&(c={}),a.url(this.invokeUrlWriter(b,c))},getPersistentStates:function(){return d},setReady:function(a){return a?this.readyDeferred.resolve():this.readyDeferred=f.defer(),this.ready=a},isReady:function(){return this.ready},whenReady:function(){return this.readyDeferred.promise}}}},e.registerType("numeric",{regex:/\d+/,parser:["token",function(a){return parseInt(a)}]}),e.registerType("alpha",{regex:/[a-zA-Z]+/}),e.registerType("any",{regex:/.+/}),e})}.call(this),function(){angular.module("bicker_router").provider("State",function(){return{$get:function(a){var b;return b=a.create()}}})}.call(this),function(){angular.module("bicker_router").provider("ViewBindings",function(){var a,b,c;return c={},a=function(){function a(a,b){this.name=a,this.bindings=b,this.bindings instanceof Array||(this.bindings=[this.bindings])}return a.prototype.getBindings=function(){return this.bindings},a}(),b={bind:function(b,d){var e,f,g;if(e=function(a,b){var c,d,e,f;for(f=[],d=0,e=g.length;e>d;d++)c=g[d],c.requiredState instanceof Array||(c.requiredState=[c.requiredState]),f.push(c.requiredState=c.requiredState.concat(b));return f},f=function(a,b){var c,d,e,f;for(f=[],d=0,e=g.length;e>d;d++)c=g[d],"resolve"in c||(c.resolve={}),f.push(_.defaults(c.resolve,b));return f},g=[],g="bindings"in d?d.bindings:d instanceof Array?d:[d],!(g.length>0))throw new Error("Invalid call to ViewBindingsProvider.bind for name '"+b+"'");return"commonRequiredState"in d&&e(g,d.commonRequiredState),"commonResolve"in d&&f(g,d.commonResolve),c[b]=new a(b,g)},$get:function(){return{getView:function(a){return c[a]}}}}})}.call(this);
//# sourceMappingURL=bicker.min.js.map